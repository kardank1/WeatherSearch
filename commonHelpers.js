var m=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var o=(t,e,s)=>(m(t,e,"read from private field"),s?s.call(t):e.get(t)),n=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},d=(t,e,s,a)=>(m(t,e,"write to private field"),a?a.call(t,s):e.set(t,s),s);import"./assets/styles-ecd5fb93.js";import{a as f,P as v,i as g}from"./assets/vendor-8722fc9f.js";var c,y,p,u;class q{constructor(){n(this,c,"https://api.unsplash.com/search/photos");n(this,y,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");n(this,p,new URLSearchParams({per_page:12,orientation:"portrait",client_id:o(this,y)}));n(this,u,"")}async getPopularPhotos(e){const s=`${o(this,c)}?query=popular&page=${e}&${o(this,p)}`;try{const{data:a}=await f.get(s);return a}catch(a){console.log(a)}}set query(e){d(this,u,e)}async getPhotoByQuery(e){const s=`${o(this,c)}?query=${o(this,u)}&page=${e}&${o(this,p)}`;try{const{data:a}=await f.get(s);return a}catch(a){console.log(a)}}}c=new WeakMap,y=new WeakMap,p=new WeakMap,u=new WeakMap;function h(t){return t.map(({urls:e,alt_description:s})=>`<li class='gallery__item'><img src='${e.small}' alt='${s}'></li>`).join("")}const r={galleryList:document.querySelector(".js-gallery"),galleryTui:document.querySelector("#tui-pagination-container"),jsSearchForm:document.querySelector(".js-search-form"),loader:document.querySelector(".loader")},l=new q,S={totalItems:0,itemsPerPage:12,visiblePages:5,page:1,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},i=new v(r.galleryTui,S),L=i.getCurrentPage();l.getPopularPhotos(L).then(({results:t,total:e})=>{r.galleryList.innerHTML=h(t),i.reset(e)});i.on("beforeMove",b);r.jsSearchForm.addEventListener("submit",t=>{t.preventDefault();const e=t.target.elements.query.value.trim();if(e===""){g.info({message:"enter query for search",position:"topRight"});return}r.jsSearchForm.reset(),i.off("beforeMove",P),i.off("beforeMove",b),l.query=e,r.loader.classList.remove("is-hidden"),l.getPhotoByQuery(L).then(({results:s,total:a})=>{if(!s.length){g.info({message:"try another query",position:"topRight"});return}r.galleryList.innerHTML=h(s),g.info({message:`We found ${a} images`,position:"topRight"}),a<=12?r.galleryTui.classList.add("is-hidden"):r.galleryTui.classList.remove("is-hidden"),i.reset(a)}).catch(s=>{console.log(s),g.error({message:"Try later",position:"topRight"})}).finally(()=>r.loader.classList.add("is-hidden")),i.on("beforeMove",P)});function b(t){const{page:e}=t;l.getPopularPhotos(e).then(({results:s})=>{r.galleryList.innerHTML=h(s)})}function P({page:t}){l.getPhotoByQuery(t).then(({results:e})=>{r.galleryList.innerHTML=h(e)})}
//# sourceMappingURL=commonHelpers.js.map
