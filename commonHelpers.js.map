{"version":3,"file":"commonHelpers.js","sources":["../src/js/UnsplashAPI.js","../src/js/createGallery.js","../src/js/refs.js","../src/js/gallery.js"],"sourcesContent":["import axios from 'axios';\n\nexport class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com/search/photos';\n  #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n  #query = '';\n  async getPopularPhotos(page) {\n    const urlApi = `${\n      this.#BASE_URL\n    }?query=popular&page=${page}&per_page=12&orientation=portrait&client_id=${\n      this.#API_KEY\n    }`;\n    try {\n      const { data } = await axios.get(urlApi);\n      return data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  set query(newQuery) {\n    this.#query = newQuery;\n   \n  }\n  async getPhotoByQuery(page) {\n  const urlApi = `${\n      this.#BASE_URL\n    }?query=${this.#query}&page=${page}&per_page=12&orientation=portrait&client_id=${\n      this.#API_KEY\n    }`;\n    try {\n      const { data } = await axios.get(urlApi);\n      return data;\n    } catch (error) {\n      console.log(error);\n    }\n}  \n}\n","export function createGalleryCard(images) {\n    return images\n      .map(\n        ({ urls, alt_description }) =>\n          `<li class='gallery__item'><img src='${urls.small}' alt='${alt_description}'></li>`\n      )\n      .join('');\n  }","export const refs = {\n    galleryList: document.querySelector(\".js-gallery\"),\n    galleryTui: document.querySelector(\"#tui-pagination-container\"),\n    jsSearchForm: document.querySelector(\".js-search-form\"),\n}","import iziToast from 'izitoast';\nimport { UnsplashAPI } from './UnsplashAPI';\nimport { createGalleryCard } from './createGallery';\nimport { refs } from './refs';\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst api = new UnsplashAPI();\n\nconst options = {\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n};\n\nconst pagination = new Pagination(refs.galleryTui, options);\nconst page = pagination.getCurrentPage();\n\napi.getPopularPhotos(page).then(({ results, total }) => {\n  refs.galleryList.innerHTML = createGalleryCard(results);\n  pagination.reset(total);\n});\n\npagination.on('beforeMove', popular);\n\nrefs.jsSearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n\n  const searchQuery = event.target.elements.query.value.trim();\n  if (searchQuery === '') {\n    iziToast.info({\n      message: 'enter query for search',\n      position: 'topRight',\n    });\n    return;\n  }\n  refs.jsSearchForm.reset();\n  pagination.off('beforeMove', byQuery);\n  pagination.off('beforeMove', popular);\n  api.query = searchQuery;\n\n  api.getPhotoByQuery(page).then(({ results, total }) => {\n    if (!results.length) {\n      iziToast.info({\n        message: 'try another query',\n        position: 'topRight',\n      });\n      return;\n    }\n    refs.galleryList.innerHTML = createGalleryCard(results);\n    iziToast.info({\n      message: `We found ${total} images`,\n      position: 'topRight',\n    });\n    pagination.reset(total);\n  });\n  pagination.on('beforeMove', byQuery);\n});\n\nfunction popular(event) {\n  const { page } = event;\n  api.getPopularPhotos(page).then(({ results }) => {\n    refs.galleryList.innerHTML = createGalleryCard(results);\n  });\n}\n\nfunction byQuery({ page }) {\n  api.getPhotoByQuery(page).then(({ results }) => {\n    refs.galleryList.innerHTML = createGalleryCard(results);\n  });\n}\n"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","page","urlApi","__privateGet","data","axios","error","newQuery","__privateSet","createGalleryCard","images","urls","alt_description","refs","api","options","pagination","Pagination","results","total","popular","event","searchQuery","iziToast","byQuery"],"mappings":"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"}