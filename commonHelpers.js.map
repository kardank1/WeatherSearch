{"version":3,"file":"commonHelpers.js","sources":["../src/js/UnsplashAPI.js","../src/js/createGallery.js","../src/js/refs.js","../src/js/gallery.js"],"sourcesContent":["import axios from 'axios';\n\nexport class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com/search/photos';\n  #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n  #searchParams = new URLSearchParams({\n    per_page: 12,\n    orientation: 'portrait',\n    client_id: this.#API_KEY,\n  });\n  #query = '';\n  async getPopularPhotos(page) {\n    const urlApi = `${this.#BASE_URL}?query=popular&page=${page}&${this.#searchParams}`;\n    try {\n      const { data } = await axios.get(urlApi);\n      return data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  set query(newQuery) {\n    this.#query = newQuery;\n   \n  }\n  async getPhotoByQuery(page) {\n  const urlApi = `${this.#BASE_URL}?query=${this.#query}&page=${page}&${this.#searchParams}`;\n    try {\n      const { data } = await axios.get(urlApi);\n      return data;\n    } catch (error) {\n      console.log(error);\n    }\n}  \n}\n","export function createGalleryCard(images) {\n    return images\n      .map(\n        ({ urls, alt_description }) =>\n          `<li class='gallery__item'><img src='${urls.small}' alt='${alt_description}'></li>`\n      )\n      .join('');\n  }","export const refs = {\n    galleryList: document.querySelector(\".js-gallery\"),\n    galleryTui: document.querySelector(\"#tui-pagination-container\"),\n    jsSearchForm: document.querySelector(\".js-search-form\"),\n    loader: document.querySelector(\".loader\"),\n}","import iziToast from 'izitoast';\nimport { UnsplashAPI } from './UnsplashAPI';\nimport { createGalleryCard } from './createGallery';\nimport { refs } from './refs';\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst api = new UnsplashAPI();\n\nconst options = {\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n    currentPage: '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n    moveButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n            '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</a>',\n    disabledMoveButton:\n        '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n            '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</span>',\n    moreButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n            '<span class=\"tui-ico-ellip\">...</span>' +\n        '</a>'\n  },\n};\n\nconst pagination = new Pagination(refs.galleryTui, options);\nconst page = pagination.getCurrentPage();\n\napi.getPopularPhotos(page).then(({ results, total }) => {\n  refs.galleryList.innerHTML = createGalleryCard(results);\n  pagination.reset(total);\n});\n\npagination.on('beforeMove', popular);\n\nrefs.jsSearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n\n  const searchQuery = event.target.elements.query.value.trim();\n  if (searchQuery === '') {\n    iziToast.info({\n      message: 'enter query for search',\n      position: 'topRight',\n    });\n    return;\n  }\n  refs.jsSearchForm.reset();\n  pagination.off('beforeMove', byQuery);\n  pagination.off('beforeMove', popular);\n  api.query = searchQuery;\n\n  refs.loader.classList.remove('is-hidden');\n  api.getPhotoByQuery(page).then(({ results, total }) => {\n    if (!results.length) {\n      iziToast.info({\n        message: 'try another query',\n        position: 'topRight',\n      });\n      return;\n    }\n    refs.galleryList.innerHTML = createGalleryCard(results);\n    iziToast.info({\n      message: `We found ${total} images`,\n      position: 'topRight',\n    });\n    if(total<=12){\n      refs.galleryTui.classList.add(\"is-hidden\")\n    }else{\n      refs.galleryTui.classList.remove(\"is-hidden\")\n    }\n    \n    pagination.reset(total);\n  }).catch(\n    error => {\n      console.log(error);\n      iziToast.error({\n        message: \"Try later\",\n        position: \"topRight\"\n      })\n    }\n  )\n  .finally(\n    () => refs.loader.classList.add('is-hidden')\n  );\n  pagination.on('beforeMove', byQuery);\n});\n\nfunction popular(event) {\n  const { page } = event;\n  api.getPopularPhotos(page).then(({ results }) => {\n    refs.galleryList.innerHTML = createGalleryCard(results);\n  });\n}\n\nfunction byQuery({ page }) {\n  api.getPhotoByQuery(page).then(({ results }) => {\n    refs.galleryList.innerHTML = createGalleryCard(results);\n  });\n}\n"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_searchParams","__privateGet","_query","page","urlApi","data","axios","error","newQuery","__privateSet","createGalleryCard","images","urls","alt_description","refs","api","options","pagination","Pagination","results","total","popular","event","searchQuery","iziToast","byQuery"],"mappings":"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"}